#ifndef GAME_OBJECT_MANAGER_H_INCLUDED
#define GAME_OBJECT_MANAGER_H_INCLUDED

#ifdef NET_PHYSICS_CLIENT
	#undef GAME_OBJECT_MANAGER_H_INCLUDED	
	#pragma once
	#include "NetPhysicsClient.h"
#endif /* NET_PHYSICS_CLIENT */

#include <memory>
#include "GameObjectList.h"

namespace NetPhysics {
	class HandleManager;
	class GameObject;
	struct ComponentList;

	/*
		Factory for GameObjects. Handles allocation, deletion, and retrieval.
	*/
	class GameObjectManager {
	public:

		/*
		Iterates through the container polling if any game object has expired
		@param handleManager a pointer to the HandleManager object the members of container are in.
		*/
		void update(HandleManager &handleManager);

		/*
		Stores a pointer to a game object within the container.
		@param gameObject a pointer to the object to be stored
		@return a pointer to the newly stored GameObject
		*/
		GameObject* createGameObject(GameObject* gameObject);

		/*
		Filters through container, returning a vector of the GameObject that meet the requirements.
		@param filter The GameObjectFilter describing the requirements of the returned object.
		@return a vector of handles to the GameObjects that match the filter.
		*/
		GameObjectList getGameObjectsWithComponents(
			ComponentList &componentList);

	private:

		std::vector<std::shared_ptr<GameObject>> container;
	};
}

#endif